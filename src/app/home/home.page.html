<ion-menu contentId="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-title>Menú</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <ion-list>
      <ion-item>
        <ion-icon name="person-circle-outline" slot="start"></ion-icon>
        <ion-label>
          <h2>{{ currentUser?.nombre || 'Usuario' }}</h2>
          <p>{{ currentUser?.type || 'Sin rol' }}</p>
        </ion-label>
      </ion-item>

      <!-- Menú para Cliente -->
      @if (currentUser?.type === 'cliente') {
        <ion-item button (click)="navigateTo('/menu')">
          <ion-icon name="restaurant-outline" slot="start"></ion-icon>
          <ion-label>Ver Menú</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/reservas')">
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>Mis Reservas</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/encuestas')">
          <ion-icon name="clipboard-outline" slot="start"></ion-icon>
          <ion-label>Encuestas</ion-label>
        </ion-item>
      }

      <!-- Menú para Empleado -->
      @if (currentUser?.type === 'empleado') {
        <ion-item button (click)="navigateTo('/pedidos')">
          <ion-icon name="list-outline" slot="start"></ion-icon>
          <ion-label>Pedidos Activos</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/turnos')">
          <ion-icon name="time-outline" slot="start"></ion-icon>
          <ion-label>Mis Turnos</ion-label>
        </ion-item>
      }

      <!-- Menú para Supervisor -->
      @if (currentUser?.type === 'supervisor') {
        <ion-item button (click)="navigateTo('/empleados')">
          <ion-icon name="people-outline" slot="start"></ion-icon>
          <ion-label>Gestión Empleados</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/reportes')">
          <ion-icon name="bar-chart-outline" slot="start"></ion-icon>
          <ion-label>Reportes</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/mesas')">
          <ion-icon name="grid-outline" slot="start"></ion-icon>
          <ion-label>Mesas</ion-label>
        </ion-item>
      }

      <!-- Menú para Dueño -->
      @if (currentUser?.type === 'dueño' || currentUser?.type === 'dueno') {
        <ion-item button (click)="navigateTo('/dashboard')">
          <ion-icon name="stats-chart-outline" slot="start"></ion-icon>
          <ion-label>Dashboard</ion-label>
        </ion-item>
        <ion-item button (click)="navigateTo('/gestion')">
          <ion-icon name="settings-outline" slot="start"></ion-icon>
          <ion-label>Gestión Completa</ion-label>
        </ion-item>
      }

      <ion-item button (click)="handleLogout()" color="danger">
        <ion-icon name="log-out-outline" slot="start"></ion-icon>
        <ion-label>Cerrar Sesión</ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>{{ getUserTypeTitle() }}</ion-title>
      <ion-buttons slot="end">
        <ion-button (click)="handleLogout()">
          <ion-icon slot="icon-only" name="log-out-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <!-- Contenido específico para Cliente -->
    @if (currentUser?.type === 'cliente') {
      <h2>Bienvenido Cliente</h2>
      <div class="actions-grid">
        <ion-card class="action-card" button (click)="scan()">
          <ion-card-header>
            <ion-card-title>Escanear QR Mesa</ion-card-title>
          </ion-card-header>
        </ion-card>

        <ion-card class="action-card" button (click)="navigateTo('/menu')">
          <ion-card-header>
            <ion-card-title>Ver Carta</ion-card-title>
          </ion-card-header>
        </ion-card>

        <ion-card class="action-card" button (click)="navigateTo('/reservas')">
          <ion-card-header>
            <ion-card-title>Hacer Reserva</ion-card-title>
          </ion-card-header>
        </ion-card>
      </div>
    }

    <!-- Contenido específico para Empleado -->
    @if (currentUser?.type === 'empleado') {
      <h2>Panel de Empleado</h2>
      <ion-list>
        <ion-item button detail (click)="navigateTo('/pedidos')">
          <ion-label>Ver Pedidos Pendientes</ion-label>
        </ion-item>
        <ion-item button detail (click)="navigateTo('/asistencia')">
          <ion-label>Registrar Asistencia</ion-label>
        </ion-item>
      </ion-list>
    }

    <!-- Contenido específico para Supervisor -->
    <!-- @if (currentUser?.type === 'supervisor') {
      <h2>Panel de Supervisor</h2>
      <ion-list>
        <ion-item button detail (click)="navigateTo('/empleados')">
          <ion-label>Gestionar Empleados</ion-label>
        </ion-item>
        <ion-item button detail (click)="navigateTo('/estadisticas')">
          <ion-label>Ver Estadísticas</ion-label>
        </ion-item>
      </ion-list>
    } -->

    <!-- Contenido específico para Dueño -->
    <div *ngIf="currentUser?.type === 'dueño' || currentUser?.type === 'dueno' || currentUser?.type === 'supervisor'">
      <h2>Panel de {{ currentUser?.type }}</h2>
      <ion-list>
        <ion-item button detail (click)="navigateTo('/dashboard')">
          <ion-label>Dashboard</ion-label>
        </ion-item>
        <ion-item button detail (click)="navigateTo('/gestion')">
          <ion-label>Autorizar Cliente</ion-label>
        </ion-item>
        <ion-item button detail (click)="navigateTo('/alta-mesa')">
          <ion-label>Alta Mesa</ion-label>
        </ion-item>
        <ion-item button detail (click)="navigateTo('/estadisticas')">
          <ion-label>Ver Estadísticas</ion-label>
        </ion-item>
      </ion-list>
    </div>
    
  </ion-content>
</div>